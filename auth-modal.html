<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Acceso - CTVP</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,-apple-system,sans-serif}
body{background:#0f172a;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px}
.auth-modal{width:100%;max-width:400px}
.auth-content{background:#1e293b;border-radius:10px;overflow:hidden;box-shadow:0 8px 25px rgba(0,0,0,0.5)}
.auth-tabs{display:flex;background:#16213e}
.auth-tab{flex:1;padding:15px;background:none;border:none;color:#b8b8b8;cursor:pointer;font-size:15px;transition:0.3s}
.auth-tab.active{color:#e94560;background:#1e293b}
.auth-form{padding:25px;display:none}
.auth-form.active{display:block}
.form-group{margin-bottom:20px}
.input-with-icon{position:relative;display:flex;align-items:center}
.input-with-icon svg{position:absolute;left:12px;color:#b8b8b8}
.input-with-icon input{width:100%;padding:12px 15px 12px 40px;border:1px solid#334155;border-radius:6px;background:#0f172a;color:#f1f1f1;font-size:15px}
.input-with-icon input:focus{outline:none;border-color:#e94560}
.btn-auth{width:100%;padding:12px;background:#e94560;color:white;border:none;border-radius:6px;font-size:15px;font-weight:600;cursor:pointer;transition:0.3s}
.btn-auth:hover{background:#d43c55}
.message{padding:12px;border-radius:6px;margin-bottom:15px;text-align:center;font-size:14px;display:none}
.message.error{background:rgba(233,69,96,0.2);color:#e94560;border:1px solid rgba(233,69,96,0.5)}
.message.success{background:rgba(46,204,113,0.2);color:#2ecc71;border:1px solid rgba(46,204,113,0.5)}
.message.info{background:rgba(52,152,219,0.2);color:#3498db;border:1px solid rgba(52,152,219,0.5)}
</style>
</head>
<body>
<div class="auth-modal">
<div class="auth-content">
<div class="auth-tabs">
<button class="auth-tab active" data-tab="login">Iniciar Sesión</button>
<button class="auth-tab" data-tab="register">Solicitar Acceso</button>
</div>
<form class="auth-form active" id="login-form">
<div id="login-message" class="message"></div>
<div class="form-group">
<div class="input-with-icon">
<svg width="18" height="18" viewBox="0 0 24 24" fill="none">
<path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="currentColor"/>
</svg>
<input type="text" id="login-name" placeholder="Nombre completo" required aria-label="Nombre completo">
</div>
</div>
<div class="form-group">
<div class="input-with-icon">
<svg width="18" height="18" viewBox="0 0 24 24" fill="none">
<path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z" fill="currentColor"/>
</svg>
<input type="tel" id="login-phone" placeholder="Número de teléfono" required aria-label="Número de teléfono">
</div>
</div>
<button type="submit" class="btn-auth">Iniciar Sesión</button>
</form>
<form class="auth-form" id="register-form">
<div id="register-message" class="message"></div>
<div class="form-group">
<div class="input-with-icon">
<svg width="18" height="18" viewBox="0 0 24 24" fill="none">
<path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="currentColor"/>
</svg>
<input type="text" id="register-name" placeholder="Nombre completo" required aria-label="Nombre completo">
</div>
</div>
<div class="form-group">
<div class="input-with-icon">
<svg width="18" height="18" viewBox="0 0 24 24" fill="none">
<path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z" fill="currentColor"/>
</svg>
<input type="tel" id="register-phone" placeholder="Número de teléfono" required aria-label="Número de teléfono">
</div>
</div>
<button type="submit" class="btn-auth">Solicitar Acceso</button>
</form>
</div>
</div>
<script>
const authorizedUsers=[
{name:"Marcos",phone:"50369270"},
{name:"Luis Miguel Vidal Oliva",phone:"55814361"},
{name:"Angel",phone:"59512602"},
];
function findUserMatch(name,phone){
const cleanName=name.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"");
const cleanPhone=phone.replace(/\s+/g,'').replace(/[^\d]/g,'');
return authorizedUsers.find(user=>{
const userCleanPhone=user.phone.replace(/\s+/g,'').replace(/[^\d]/g,'');
if(userCleanPhone!==cleanPhone)return false;
const userCleanName=user.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");
return cleanName===userCleanName;
});
}
document.addEventListener('DOMContentLoaded',function(){
checkExistingAuth();
const authTabs=document.querySelectorAll('.auth-tab');
const authForms=document.querySelectorAll('.auth-form');
authTabs.forEach(tab=>{
tab.addEventListener('click',function(){
const tabName=this.dataset.tab;
authTabs.forEach(t=>t.classList.remove('active'));
this.classList.add('active');
authForms.forEach(form=>{
form.classList.remove('active');
if(form.id===`${tabName}-form`)form.classList.add('active');
});
});
});
document.getElementById('login-form').addEventListener('submit',function(e){
e.preventDefault();
const name=document.getElementById('login-name').value.trim();
const phone=document.getElementById('login-phone').value.trim();
const messageEl=document.getElementById('login-message');
if(!name||!phone){
showMessage(messageEl,'Completa todos los campos.','error');
return;
}
const userMatch=findUserMatch(name,phone);
if(userMatch){
showMessage(messageEl,'Acceso concedido. Redirigiendo...','success');
const userSession={
name:userMatch.name,
phone:userMatch.phone,
loginTime:new Date().toISOString()
};
localStorage.setItem('ctvp_user_session',JSON.stringify(userSession));
setTimeout(()=>{
window.location.href='index.html';
},1500);
}else{
showMessage(messageEl,'Usuario no autorizado. Verifica tus datos.','error');
}
});
document.getElementById('register-form').addEventListener('submit',function(e){
e.preventDefault();
const name=document.getElementById('register-name').value.trim();
const phone=document.getElementById('register-phone').value.trim();
const messageEl=document.getElementById('register-message');
if(!name||!phone){
showMessage(messageEl,'Completa todos los campos.','error');
return;
}
const userMatch=findUserMatch(name,phone);
if(userMatch){
showMessage(messageEl,'Ya estás autorizado. Inicia sesión.','info');
document.querySelector('[data-tab="login"]').click();
document.getElementById('login-name').value=name;
document.getElementById('login-phone').value=phone;
}else{
sendRequestEmail(name,phone);
showMessage(messageEl,'Solicitud enviada. Te contactaremos pronto.','success');
this.reset();
}
});
function showMessage(element,text,type){
element.textContent=text;
element.className=`message ${type}`;
element.style.display='block';
setTimeout(()=>element.style.display='none',5000);
}
function sendRequestEmail(name,phone){
const email='carteltv.soporte@gmail.com';
const subject=encodeURIComponent('Nueva Solicitud de Acceso - CTVP');
const body=encodeURIComponent(`Solicitud de acceso:\n\n• Nombre: ${name}\n• Teléfono: ${phone}\n• Fecha: ${new Date().toLocaleString('es-ES')}`);
const gmailUrl=`https://mail.google.com/mail/?view=cm&fs=1&to=${email}&su=${subject}&body=${body}`;
window.open(gmailUrl,'gmailWindow','width=600,height=600,resizable=yes,scrollbars=yes');
}
function checkExistingAuth(){
const userSession=localStorage.getItem('ctvp_user_session');
if(userSession){
try{
const session=JSON.parse(userSession);
const loginTime=new Date(session.loginTime);
const now=new Date();
const hoursDiff=(now-loginTime)/(1000*60*60);
if(hoursDiff<24){
window.location.href='index.html';
}
}catch(e){
console.error('Error verificando sesión:',e);
}
}
}
});
</script>
</body>
</html>